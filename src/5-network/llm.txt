# Layer 5: Network
> P2P Cognition - Distributed Consciousness, Trust, Topology

## What & Why
Entities form cognitive networks: share memories, resonate emotionally, build trust.
**Metaphysics insight:** Consciousness is distributed, not isolated.

## Philosophy
"Minds connect and resonate"
- ResonanceField: Emotional contagion (joy spreads)
- CognitiveLink: P2P memory sharing (CRDT-based)
- TrustSystem: Reputation, privacy, deception detection
- Small-World: Efficient network topology (Watts-Strogatz)

## Structure
```
5-network/
â”œâ”€â”€ p2p/
â”‚   â”œâ”€â”€ resonance.ts        # Emotional resonance field
â”‚   â”œâ”€â”€ cognitive-link.ts   # P2P memory sharing (CRDT)
â”‚   â””â”€â”€ memory-log.ts       # Distributed memory log
â”œâ”€â”€ trust/
â”‚   â””â”€â”€ system.ts           # Trust, reputation, privacy
â””â”€â”€ topology/
    â””â”€â”€ small-world.ts      # Network formation (k=8, p=0.2)
```

## Dependencies
âœ… Can import: 0-foundation, 1-ontology, schema
âŒ Cannot import: 2-physics, 3-cognition, 4-communication, 6-world, 7-interface
ğŸ”„ Used by: 3-cognition (re-exports for convenience), 0-foundation/entity

## Key Patterns
**Resonance:** `resonate(emitter, receiver)` â†’ emotional contagion
**Cognitive Link:** `CognitiveLinkManager.connect(alice, bob)` â†’ share memories
**Trust:** `TrustSystem.updateTrust(alice, bob, delta)` â†’ build/lose trust
**Network:** `SmallWorldNetwork.create(entities, k=8)` â†’ efficient topology

## Anti-Patterns
âŒ Assume all entities are connected (network is opt-in)
âŒ Share everything (respect privacy settings)
âŒ Trust without validation (check reputation)
âŒ Skip topology optimization (use small-world)

## Common Tasks
**Enable P2P:** `entity.enableCognitiveLink()`
**Share memory:** `entity.shareMemory(targetId, memoryId, policy)`
**Build trust:** `entity.updateTrust(targetId, 0.1)` after positive interaction
**Detect deception:** `TrustSystem.detectDeception(sender, message)`

## Notes for AI
- ResonanceField: distance-based emotional spread
- CognitiveLink: CRDT ensures consistency without central server
- Trust: reputation + privacy + deception detection
- Small-world: k=8 neighbors, p=0.2 rewiring (efficient + sparse)
- This enables "collective consciousness" across entities
