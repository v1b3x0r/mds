# Layer 6: World
> Universe Container - Orchestrator of All Systems

## What & Why
World is the stage. Manages entities, fields, and orchestrates all layers.
Three-phase tick: Physical â†’ Mental â†’ Relational.

## Philosophy
"The universe that contains everything"
World doesn't do the work - it **coordinates** layers:
- Physics (movement, collision)
- Ontology (memory, emotion)
- Cognition (learning, skills)
- Communication (messages, dialogue)
- Network (P2P, trust)
- Linguistics (emergent language)

## Structure
```
6-world/
â”œâ”€â”€ container.ts        # World class (tick, spawn, orchestration)
â””â”€â”€ linguistics/
    â”œâ”€â”€ lexicon.ts          # Emergent vocabulary
    â”œâ”€â”€ transcript.ts       # Conversation history
    â”œâ”€â”€ crystallizer.ts     # Pattern â†’ language
    â””â”€â”€ proto-language.ts   # Generate coherent responses
```

## Dependencies
âœ… Can import: ALL layers (0-5, 7)
âŒ Cannot import: Nothing (World is top-level)
ðŸ”„ Used by: Public API (src/index.ts), applications

## Key Patterns
**Spawn:** `world.spawn(material, x, y)` â†’ creates entity
**Tick:** `world.tick(deltaTime)` â†’ three-phase update
**Query:** `world.getEntitiesNear(x, y, radius)` â†’ spatial queries
**Linguistics:** `world.recordSpeech(speaker, text)` â†’ builds lexicon

## Three-Phase Tick
1. **Physical:** Movement, collision, forces
2. **Mental:** Memory decay, emotion drift, learning
3. **Relational:** Relationship decay, P2P sync, messages

This ordering prevents race conditions and ensures consistent state.

## Anti-Patterns
âŒ Put domain logic in World (delegate to layers)
âŒ Skip tick phases (breaks consistency)
âŒ Query entities in hot loop (cache when possible)
âŒ Ignore linguistics (it's powerful for emergent behavior)

## Common Tasks
**Create world:** `new World({ width, height, seed })`
**Spawn entity:** `world.spawn(material, x, y)`
**Run simulation:** `setInterval(() => world.tick(1/60), 16)`
**Enable linguistics:** `world.enableLinguistics({ bufferSize: 500 })`

## Notes for AI
- World is the **orchestrator**, not the implementer
- Linguistics system: tracks vocabulary + generates proto-language
- Three-phase tick ensures consistency
- Spatial queries use quadtree (future optimization)
- Read container.ts for full orchestration logic
